@model IEnumerable<Entities.Library.MediaLibraryStorageDrive>
@using Entities.Configuration.Identity.User;
@using Entities.Library;

@inject AuthenticatedUserInfo UserInfo

@{
    ViewData["Title"] = "Overview";
    Layout = "~/Views/Shared/Sort/_SortDashboardLayout.cshtml";
}

<br />
<div class="charts-area mg-b-30">
    <div class="container-fluid">
        <!-- Television Library Charts Begin -->
        <div class="row">
            <div class="col-lg-12">
                <div class="sparkline7-list profile-online-mg-t-30 shadow-reset">
                    <div class="sparklne7-hd">
                        <div class="main-spark7-hd">
                            <h1><i class="fa fa-television"></i> Television Library Storage Drives</h1>
                            <div class="sparkline7-outline-icon">
                                <span class="sparkline7-collapse-link"><i class="fa fa-chevron-up"></i></span>
                                <span><i class="fa fa-wrench"></i></span>
                                <span class="sparkline7-collapse-close"><i class="fa fa-times"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="sparkline7-graph">
                        <div class="user-profile-contact user-profile-scrollbar mCustomScrollbar _mCS_6 mCS-autoHide" style="height: 400px; position: relative; overflow: visible;">
                            @foreach (MediaLibraryStorageDrive _drive in @Model)
                            {
                                <div class="col-lg-2">
                                    <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                        <div class="alert-title">
                                            <h2>@_drive.DriveLetter.ToUpper(): @_drive.DriveName</h2>
                                        </div>
                                        <hr />
                                        <span style="font-size: 12px; margin: 0 auto 0; color: white;">@_drive.DriveStatus</span>
                                        <ejs-accumulationchart id="@_drive.DriveLetter" title="" load="load" enableAnimation="false" height="250">
                                            <e-accumulationchart-center x="50%" y="50%"></e-accumulationchart-center>
                                            <e-accumulationchart-tooltipsettings enable="true"></e-accumulationchart-tooltipsettings>
                                            <e-accumulationchart-legendsettings visible="false">
                                            </e-accumulationchart-legendsettings>
                                            <e-accumulation-series-collection>
                                                <e-accumulation-series dataSource="ViewBag.DataSource" xName="xValue" yName="yValue" name="Space (GB)" explodeIndex="0" explode="true" explodeOffset="10%">
                                                    <e-accumulationseries-datalabel name="text" visible="true">
                                                        <e-font fontWeight="600" color="white"></e-font>
                                                    </e-accumulationseries-datalabel>
                                                </e-accumulation-series>
                                            </e-accumulation-series-collection>
                                        </ejs-accumulationchart>
                                    </div>
                                </div>
                            }

                            @if (@Model.Count() < 6 && @UserInfo.IsRoleMember("StorageModerator"))
                            {
                                <div class="col-lg-2">
                                    <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                        <div class="alert-title">
                                            <h2>Configure New Drive</h2>
                                        </div>
                                        <hr />
                                        <a href="#">
                                            <div id="pie-chart" style="height: 250px; padding-top: 100px;">
                                                <i class="fa fa-5x fa-plus-circle" style="color: white;"></i>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Television Library Charts End -->
        <br />
        <br />
        <!-- Movie Library Charts Begin -->
        <div class="row">
            <div class="col-lg-12">
                <div class="sparkline7-list profile-online-mg-t-30 shadow-reset">
                    <div class="sparklne7-hd">
                        <div class="main-spark7-hd">
                            <h1><i class="fa fa-film"></i> Movie Library Storage Drives</h1>
                            <div class="sparkline7-outline-icon">
                                <span class="sparkline7-collapse-link"><i class="fa fa-chevron-up"></i></span>
                                <span><i class="fa fa-wrench"></i></span>
                                <span class="sparkline7-collapse-close"><i class="fa fa-times"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="sparkline7-graph">
                        <div class="user-profile-contact user-profile-scrollbar mCustomScrollbar _mCS_6 mCS-autoHide" style="height: 400px; position: relative; overflow: visible;">
                            <div class="col-lg-2">
                                <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                    <div class="alert-title">
                                        <h2>M: Movies</h2>
                                    </div>
                                    <hr />
                                    <span style="font-size: 12px; margin: 0 auto 0; color: white;">Movies & Videos</span>
                                    <div id="pie-chart-m">
                                        <ejs-accumulationchart id="m-chart" title="" load="load" enableAnimation="false" height="250">
                                            <e-accumulationchart-center x="50%" y="50%"></e-accumulationchart-center>
                                            <e-accumulationchart-tooltipsettings enable="true"></e-accumulationchart-tooltipsettings>
                                            <e-accumulationchart-legendsettings visible="false">
                                            </e-accumulationchart-legendsettings>
                                            <e-accumulation-series-collection>
                                                <e-accumulation-series dataSource="ViewBag.DataSource" xName="xValue" yName="yValue" name="Space (GB)" explodeIndex="0" explode="true" explodeOffset="10%">
                                                    <e-accumulationseries-datalabel name="text" visible="true">
                                                        <e-font fontWeight="600" color="white"></e-font>
                                                    </e-accumulationseries-datalabel>
                                                </e-accumulation-series>
                                            </e-accumulation-series-collection>
                                        </ejs-accumulationchart>
                                    </div>
                                </div>
                            </div>
                            @if (@Model.Count() < 6 && @UserInfo.IsRoleMember("StorageModerator"))
                            {
                                <div class="col-lg-2">
                                    <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                        <div class="alert-title">
                                            <h2>Configure New Drive</h2>
                                        </div>
                                        <hr />
                                        <a href="#">
                                            <div id="pie-chart" style="height: 250px; padding-top: 100px;">
                                                <i class="fa fa-5x fa-plus-circle" style="color: white;"></i>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Movie Library Charts End -->
        <br />
        <br />
        <!-- Sort Drive Chart Begin -->
        <div class="row">
            <div class="col-lg-12">
                <div class="sparkline7-list profile-online-mg-t-30 shadow-reset">
                    <div class="sparklne7-hd">
                        <div class="main-spark7-hd">
                            <h1><i class="fa fa-cogs"></i> System Storage Drives</h1>
                            <div class="sparkline7-outline-icon">
                                <span class="sparkline7-collapse-link"><i class="fa fa-chevron-up"></i></span>
                                <span><i class="fa fa-wrench"></i></span>
                                <span class="sparkline7-collapse-close"><i class="fa fa-times"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="sparkline7-graph">
                        <div class="user-profile-contact user-profile-scrollbar mCustomScrollbar _mCS_6 mCS-autoHide" style="height: 400px; position: relative; overflow: visible;">
                            <div class="col-lg-2">
                                <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                    <div class="alert-title">
                                        <h2>S: Sort</h2>
                                    </div>
                                    <hr />
                                    <span style="font-size: 12px; margin: 0 auto 0; color: white;">Classification Sort Drive</span>
                                    <div id="pie-chart-s">
                                        <ejs-accumulationchart id="s-chart" title="" load="load" enableAnimation="false" height="250">
                                            <e-accumulationchart-center x="50%" y="50%"></e-accumulationchart-center>
                                            <e-accumulationchart-tooltipsettings enable="true"></e-accumulationchart-tooltipsettings>
                                            <e-accumulationchart-legendsettings visible="false">
                                            </e-accumulationchart-legendsettings>
                                            <e-accumulation-series-collection>
                                                <e-accumulation-series dataSource="ViewBag.DataSource" xName="xValue" yName="yValue" name="Space (GB)" explodeIndex="0" explode="true" explodeOffset="10%">
                                                    <e-accumulationseries-datalabel name="text" visible="true">
                                                        <e-font fontWeight="600" color="white"></e-font>
                                                    </e-accumulationseries-datalabel>
                                                </e-accumulation-series>
                                            </e-accumulation-series-collection>
                                        </ejs-accumulationchart>
                                    </div>
                                </div>
                            </div>
                            @if (@Model.Count() < 6 && @UserInfo.IsRoleMember("StorageModerator"))
                            {
                                <div class="col-lg-2">
                                    <div class="charts-single-pro shadow-reset nt-mg-b-30">
                                        <div class="alert-title">
                                            <h2>Configure New Drive</h2>
                                        </div>
                                        <hr />
                                        <a href="#">
                                            <div id="pie-chart" style="height: 250px; padding-top: 100px;">
                                                <i class="fa fa-5x fa-plus-circle" style="color: white;"></i>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sort Drive Chart End -->
    </div>
</div>

<script>

    function anglechange(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        if (pie.series[0].startAngle !== +value || pie.series[0].endAngle !== +value) {
            pie.series[0].startAngle = +value;
            pie.series[0].endAngle = +value;
            document.getElementById('anglevalue').innerHTML = value.toString();
            pie.removeSvg();
            pie.refreshSeries();
            pie.refreshChart();
        }
    }

    document.getElementById('pieangle').onpointermove = document.getElementById('pieangle').ontouchmove =
        document.getElementById('pieangle').onchange = (e) => {
            anglechange(+(document.getElementById('pieangle')).value);
        };
    function radiuschange(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        if (pie.series[0].radius !== value + '%') {
            pie.series[0].radius = value + '%';
            document.getElementById('radius').innerHTML = (value / 100).toFixed(2);
            pie.removeSvg();
            pie.refreshSeries();
            pie.refreshChart();
        }
    }

    document.getElementById('pieradius').onpointermove = document.getElementById('pieradius').ontouchmove =
        document.getElementById('pieradius').onchange = (e) => {
            radiuschange(+(document.getElementById('pieradius')).value);
        };
    function exploderadius(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        if (pie.visibleSeries[0].explodeOffset !== value + '%') {
            pie.visibleSeries[0].explodeOffset = value + '%';
            document.getElementById('exploderadius').innerHTML = (value / 100).toFixed(2);
            pie.removeSvg();
            pie.refreshSeries();
            pie.refreshChart();
        }
    }

    document.getElementById('pieexploderadius').onpointermove = document.getElementById('pieexploderadius').ontouchmove =
        document.getElementById('pieexploderadius').onchange = (e) => {
            exploderadius(+(document.getElementById('pieexploderadius')).value);
        };
    function explodeIndex(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        if (pie.visibleSeries[0].explodeIndex !== +value) {
            pie.visibleSeries[0].explodeIndex = +value;
            document.getElementById('explodeindex').innerHTML = value.toString();
            pie.removeSvg();
            pie.refreshSeries();
            pie.refreshChart();
        }
    }

    document.getElementById('pieexplodeindex').onpointermove = document.getElementById('pieexplodeindex').ontouchmove =
        document.getElementById('pieexplodeindex').onchange = (e) => {
            explodeIndex(+(document.getElementById('pieexplodeindex')).value);
        };
    function xchange(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        pie.center.x = value + '%';
        document.getElementById('xvalue').innerHTML = value + '%';
        pie.removeSvg(); pie.refreshSeries(); pie.refreshChart();
    }
    document.getElementById('x').onpointermove = document.getElementById('x').ontouchmove =
        document.getElementById('x').onchange = function (e) {
            xchange(+(document.getElementById('x')).value);
        };
    function ychange(value) {
        var pie = document.getElementById("container").ej2_instances[0];
        pie.center.y = value + '%';
        document.getElementById('yvalue').innerHTML = value + '%';
        pie.removeSvg(); pie.refreshSeries(); pie.refreshChart();
    }
    document.getElementById('y').onpointermove = document.getElementById('y').ontouchmove =
        document.getElementById('y').onchange = function (e) {
            ychange(+(document.getElementById('y')).value);
        };
    function load(args) {
        var indexedTheme = location.hash.split('/')[1];
        indexedTheme = indexedTheme ? indexedTheme : 'Material';
        args.accumulation.theme = (indexedTheme.charAt(0).toUpperCase() + indexedTheme.slice(1).replace(/dark/i, "Dark").replace(/light/i, "Light"));
        args.accumulation.series[0].startAngle = 0;
        args.accumulation.series[0].endAngle = 0;
        args.accumulation.series[0].explodeIndex = 0;
    }
</script>